#!/usr/bin/env node

var argv = require('yargs').usage('Usage: $0 -x [num] -y [num]', {
  p: {
      alias: 'port'
    , default: 28000
  },

  t: {
      alias: 'target'
    , default: './.fancy/compiled'
  }
}).argv;

require('../src/server/www.js').start({
    port: argv.port
  , workers: 4
  , content: 'content'
  , theme: null
  , 'static': true
}, function(err) {
  if (err) throw err;
  // FIXME: wait for www workers to all start.  this waits arbitrary amount, should be evt.
  setTimeout(function() {
    require('../src/compilation/compiler.js').start(argv, function(err) {
      if (err) throw err;
      process.exit(0);
    });
  }, 1000);
});

